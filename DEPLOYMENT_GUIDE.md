# üé´ Sellercom Event Tickets - –ì–∞–π–¥ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **Laravel 12** —Å PostgreSQL
- **Docker** –æ–∫—Ä—É–∂–µ–Ω–∏–µ (nginx, PHP 8.3, PostgreSQL, Redis, MailHog)
- **Filament 3.2** –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- **PayMe API** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **Telegram Bot** –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **QR-–∫–æ–¥—ã** —Å –≥–∏–±—Ä–∏–¥–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
- **–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π**: admin, organizer, helper, user, guest

### üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (22 —Ç–∞–±–ª–∏—Ü—ã)
‚úÖ **categories** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π  
‚úÖ **events** - –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —Å –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å—é  
‚úÖ **event_sessions** - —Å–µ—Å—Å–∏–∏ –¥–ª—è –º–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π  
‚úÖ **ticket_types** - —Ç–∏–ø—ã –±–∏–ª–µ—Ç–æ–≤ —Å —Ü–µ–Ω–∞–º–∏  
‚úÖ **orders** - –∑–∞–∫–∞–∑—ã —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –Ω–æ–º–µ—Ä–æ–≤  
‚úÖ **tickets** - –±–∏–ª–µ—Ç—ã —Å QR-–∫–æ–¥–∞–º–∏  
‚úÖ **payments** - PayMe —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  
‚úÖ **refunds** - –≥–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤  
‚úÖ **system_settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PayMe/Telegram  
‚úÖ **users** —Å —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏

### üîß API Endpoints
```
POST /api/payme/callback - PayMe callbacks
POST /api/payme/create-payment - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
GET  /api/payme/status - —Å—Ç–∞—Ç—É—Å PayMe

POST /api/tickets/validate - –≤–∞–ª–∏–¥–∞—Ü–∏—è QR (—Ç—Ä–µ–±—É–µ—Ç auth)
POST /api/tickets/check - –ø—Ä–æ–≤–µ—Ä–∫–∞ QR –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
GET  /api/tickets/history - –∏—Å—Ç–æ—Ä–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
GET  /api/tickets/statistics - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

GET  /status - —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
GET  /customer/tickets/{order} - –±–∏–ª–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞
GET  /event/{event} - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
```

### üì± QR-–∫–æ–¥—ã (–≥–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
- **–û–±—ã—á–Ω–∞—è –∫–∞–º–µ—Ä–∞** ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Å—ã–ª–∫—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- **–°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É–∂–µ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **–û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ** —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ SHA256 —Ö–µ—à

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PayMe
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ PHP
docker exec -it avtomatiz-php-1 bash
php artisan setup:payme --merchant-id="YOUR_MERCHANT_ID" --test-key="YOUR_TEST_KEY"
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram
```bash
php artisan setup:telegram --bot-token="YOUR_BOT_TOKEN" --admin-chat-ids="CHAT_ID1,CHAT_ID2" --test
```

### 3. –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- URL: `http://localhost/admin`
- –õ–æ–≥–∏–Ω: `admin@sellercom.uz`
- –ü–∞—Ä–æ–ª—å: `admin123`

## üìã PayMe –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º)

### account (–æ—Å–Ω–æ–≤–Ω—ã–µ)
- `order_id` - ID –∑–∞–∫–∞–∑–∞ (–∏–º–µ–Ω–Ω–æ —Ç–∞–∫, –±–µ–∑ –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã)

### additional (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ)
- `fio` - –§.–ò.–û –∫–ª–∏–µ–Ω—Ç–∞
- `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
- `tariff` - –¢–∞—Ä–∏—Ñ (—Ç–∏–ø –±–∏–ª–µ—Ç–∞)
- `promocode` - –ü—Ä–æ–º–æ–∫–æ–¥ (–ø–æ–∫–∞ –ø—É—Å—Ç–æ–π)

### Callback URL –¥–ª—è PayMe
```
https://yourdomain.com/api/payme/callback
```

## üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **System Settings**
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PayMe: `merchant_id`, `test_key`, `is_test_mode`
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram: `bot_token`, `admin_chat_ids`, `group_notifications`

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã
```bash
# PayMe –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
php artisan setup:payme

# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
php artisan setup:telegram --test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost/status
```

## üé≠ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ |
|------|-------|
| **admin** | –í—Å–µ –ø—Ä–∞–≤–∞ + —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| **organizer** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ + –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| **helper** | –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–ª–µ—Ç–æ–≤ |
| **user** | –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ |
| **guest** | –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π |

## üì± Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
- `new_order` - –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
- `payment_completed` - –æ–ø–ª–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- `refund_requested` - –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞
- `ticket_validated` - –±–∏–ª–µ—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω
- `event_created` - –Ω–æ–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
- `system_error` - —Å–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä—É–ø–ø
–í –∞–¥–º–∏–Ω–∫–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∫–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–∫–∏–µ –≥—Ä—É–ø–ø—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:
```json
{
  "GROUP_ID_1": ["new_order", "payment_completed"],
  "GROUP_ID_2": ["ticket_validated", "refund_requested"]
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å QR-–∫–æ–¥–æ–≤

### –§–æ—Ä–º–∞—Ç QR
```
https://yourdomain.com/event/EVENT_SLUG?t=BASE64_ENCODED_DATA
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–µ—à–∞ SHA256
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–∏–ª–µ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üí∞ –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã
- –ß–µ—Ä–µ–∑ PayMe API (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- –î–æ –¥–µ–¥–ª–∞–π–Ω–∞: 5 –¥–Ω–µ–π –¥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è –¥–∞—Ç–∞

### –†—É—á–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã
- –ó–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- –í–∞—Ä–∏–∞–Ω—Ç—ã: –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥, –Ω–∞–ª–∏—á–Ω—ã–µ, –∑–∞—á–µ—Ç –Ω–∞ —Å—á–µ—Ç, –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ –¥—Ä—É–≥–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ –æ—Ç –≤–∞—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
1. **PayMe —Ä–µ–∫–≤–∏–∑–∏—Ç—ã**: merchant_id –∏ test_key
2. **Telegram Bot Token**: —Å–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
3. **Chat ID**: –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID:
1. –ù–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É @userinfobot
2. –û–Ω –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à Chat ID
3. –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
curl http://localhost/status
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
1. –ó–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É `/admin`
2. Categories ‚Üí —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. Events ‚Üí —Å–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
4. –£–∫–∞–∑–∞—Ç—å QR redirect URL

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PayMe
```bash
curl -X POST http://localhost/api/payme/create-payment \
  -H "Content-Type: application/json" \
  -d '{"order_id": 1}'
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Redis** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—á–µ—Ä–µ–¥–µ–π
- **PostgreSQL** —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- **100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (—Ä–∞—Å—á–µ—Ç)
- **Filament** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∞–¥–º–∏–Ω–∫–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Laravel Telescope** - –æ—Ç–ª–∞–¥–∫–∞ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–õ–æ–≥–∏** –≤ `/storage/logs/laravel.log`
- **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ–± –æ—à–∏–±–∫–∞—Ö

## üö® –í–∞–∂–Ω—ã–µ URL –¥–ª—è PayMe

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
- Checkout: `https://checkout.test.paycom.uz`
- Callback: `https://yourdomain.com/api/payme/callback`

### –ü—Ä–æ–¥–∞–∫—à–Ω
- Checkout: `https://checkout.paycom.uz`
- Callback: `https://yourdomain.com/api/payme/callback`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! 
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ PayMe —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏ Telegram Bot Token –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. ‚úÖ –í—Å—Ç–∞–≤–∏—Ç—å PayMe —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram –±–æ—Ç–∞  
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∫—É –±–∏–ª–µ—Ç–∞
5. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é QR

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ 